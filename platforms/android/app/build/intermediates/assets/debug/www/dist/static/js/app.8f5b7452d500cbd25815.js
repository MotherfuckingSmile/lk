webpackJsonp([3],{"/uKq":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n("Xxa5"),o=n.n(a),u=n("exGp"),i=n.n(u),s=n("IcnI"),c=this;e.default=(r=i()(o.a.mark(function t(e,n,r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.a.getters["auth/check"]||!s.a.getters["auth/token"]){t.next=8;break}return t.prev=1,t.next=4,s.a.dispatch("auth/fetchUser");case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:r();case 9:case"end":return t.stop()}},t,c,[[1,6]])})),function(t,e,n){return r.apply(this,arguments)})},"8NP1":function(t,e){},"8jA6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("IcnI");e.default=function(t,e,n){r.a.getters["auth/check"]?n({name:"home"}):n()}},"C/Wi":function(t,e,n){var r={"./admin.js":"yTZE","./auth.js":"hF7s","./check-auth.js":"/uKq","./guest.js":"8jA6"};function a(t){return n(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="C/Wi"},"D+VX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"state",function(){return p}),n.d(e,"getters",function(){return d}),n.d(e,"mutations",function(){return v}),n.d(e,"actions",function(){return m});var r,a=n("Xxa5"),o=n.n(a),u=n("exGp"),i=n.n(u),s=n("bOdI"),c=n.n(s),l=n("mtWM"),f=n.n(l),h=n("Du/2"),p={user:null,token:localStorage.token?localStorage.token:null},d={user:function(t){return t.user},token:function(t){return t.token},check:function(t){return null!==t.user}},v=(r={},c()(r,h.d,function(t,e){var n=e.token;t.token=n,localStorage.setItem("token",n)}),c()(r,h.b,function(t,e){var n=e.user;t.user=n}),c()(r,h.a,function(t){t.token=null,localStorage.removeItem("token")}),c()(r,h.c,function(t){t.user=null,t.token=null,localStorage.removeItem("token")}),c()(r,h.f,function(t,e){var n=e.user;t.user=n}),r),m={saveToken:function(t,e){var n=t.commit;t.dispatch;n(h.d,e)},fetchUser:function(t){var e=this,n=t.commit;return i()(o.a.mark(function t(){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get("http://192.168.33.101:82/api/user");case 3:r=t.sent,a=r.data,n(h.b,{user:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(h.a);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},updateUser:function(t,e){(0,t.commit)(h.f,e)},logout:function(t){var e=this,n=t.commit;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("/api/logout");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:n(h.c);case 8:case"end":return t.stop()}},t,e,[[0,5]])}))()},fetchOauthUrl:function(t,e){var n=this,r=e.provider;return i()(o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.post("/api/oauth/"+r);case 2:return e=t.sent,a=e.data,t.abrupt("return",a.url);case 5:case"end":return t.stop()}},t,n)}))()}}},"Du/2":function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return u}),n.d(e,"f",function(){return i}),n.d(e,"e",function(){return s});var r="LOGOUT",a="SAVE_TOKEN",o="FETCH_USER_SUCCESS",u="FETCH_USER_FAILURE",i="UPDATE_USER",s="SET_TITLE"},IcnI:function(t,e,n){"use strict";var r=n("bOdI"),a=n.n(r),o=n("Dd8w"),u=n.n(o),i=n("d7EF"),s=n.n(i),c=n("7+uW"),l=n("NYxO");c.a.use(l.a);var f=n("IeuG"),h=f.keys().map(function(t){return[t.replace(/(^.\/)|(\.js$)/g,""),f(t)]}).reduce(function(t,e){var n=s()(e,2),r=n[0],o=n[1];return void 0===o.namespaced&&(o.namespaced=!0),u()({},t,a()({},r,o))},{});e.a=new l.a.Store({modules:h})},IeuG:function(t,e,n){var r={"./auth.js":"D+VX","./meta.js":"sRup"};function a(t){return n(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="IeuG"},ROEn:function(t,e){},S4fZ:function(t,e){},Z5yN:function(t,e,n){var r={"./basic.vue":"yXbG","./default.vue":"lfHO"};function a(t){return n(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="Z5yN"},"bFK/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"NotFound",created:function(){console.log(this.$route)}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("ion-content",[this._v("\n  "+this._s(this.$route.path)+"\n")])},staticRenderFns:[]},o=n("VU/8")(r,a,!1,null,null,null);e.default=o.exports},eslX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a,o,u=n("Dd8w"),i=n.n(u),s=n("7+uW"),c=n("IcnI"),l=n("bOdI"),f=n.n(l),h=n("d7EF"),p=n.n(h),d=n("Gu7T"),v=n.n(d),m=n("//Fk"),_=n.n(m),g=n("Xxa5"),x=n.n(g),y=n("exGp"),k=n.n(y),b=[{path:"/",name:"home",component:function(){return n.e(1).then(n.bind(null,"vkyI")).then(function(t){return t.default||t})}},{path:"/login",name:"login",component:function(){return n.e(0).then(n.bind(null,"Ls0E")).then(function(t){return t.default||t})}},{path:"*",component:n("bFK/")}],w=n("/ocq"),E=n("9JMe"),O=(r=k()(x.a.mark(function t(e,n,r){var a;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(F.getMatchedComponents(i()({},e)));case 2:if(0!==(a=t.sent).length){t.next=5;break}return t.abrupt("return",r());case 5:!1!==a[a.length-1].loading&&F.app.$nextTick(function(){return F.app.$loading.start()}),C(R(a),e,n,function(){0===arguments.length&&F.app.setLayout(a[0].layout||""),r.apply(void 0,arguments)});case 8:case"end":return t.stop()}},t,this)})),function(t,e,n){return r.apply(this,arguments)}),I=(a=k()(x.a.mark(function t(e,n,r){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.app.$nextTick();case 2:F.app.$loading.finish();case 3:case"end":return t.stop()}},t,this)})),function(t,e,n){return a.apply(this,arguments)}),j=(o=k()(x.a.mark(function t(e){var n=this;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.a.all(e.map(function(){var t=k()(x.a.mark(function t(e){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","function"==typeof e?e():e);case 1:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}())));case 1:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)});s.a.use(w.a);var T,S,M=["check-auth"],$=(T=n("C/Wi")).keys().map(function(t){return[t.replace(/(^.\/)|(\.js$)/g,""),T(t)]}).reduce(function(t,e){var n=p()(e,2),r=n[0],a=n[1];return i()({},t,f()({},r,a.default))},{}),F=((S=new w.a({scrollBehavior:L,mode:"hash",routes:b})).beforeEach(O),S.afterEach(I),S);Object(E.sync)(c.a,F);var U=F;function C(t,e,n,r){var a=t.reverse();!function t(){if(arguments.length>0||0===a.length)return arguments.length>0&&F.app.$loading.finish(),r.apply(void 0,arguments);var o=a.pop();if("function"==typeof o)o(e,n,t);else{if(!$[o])throw Error("Undefined middleware ["+o+"]");$[o](e,n,t)}}()}function R(t){var e=[].concat(M);return t.filter(function(t){return t.middleware}).forEach(function(t){Array.isArray(t.middleware)?e.push.apply(e,v()(t.middleware)):e.push(t.middleware)}),e}function L(t,e,n){if(n)return n;if(t.hash)return{selector:t.hash};var r=F.getMatchedComponents(i()({},t)).slice(-1),a=p()(r,1)[0];return a&&!1===a.scrollToTop?{}:{x:0,y:0}}var P={data:function(){return{percent:0,show:!1,canSuccess:!0,duration:3e3,height:"2px",color:"#2196F3",failedColor:"red"}},methods:{start:function(){var t=this;return this.show=!0,this.canSuccess=!0,this._timer&&(clearInterval(this._timer),this.percent=0),this._cut=1e4/Math.floor(this.duration),this._timer=setInterval(function(){t.increase(t._cut*Math.random()),t.percent>95&&t.finish()},100),this},set:function(t){return this.show=!0,this.canSuccess=!0,this.percent=Math.floor(t),this},get:function(){return Math.floor(this.percent)},increase:function(t){return this.percent=this.percent+Math.floor(t),this},decrease:function(t){return this.percent=this.percent-Math.floor(t),this},finish:function(){return this.percent=100,this.hide(),this},pause:function(){return clearInterval(this._timer),this},hide:function(){var t=this;return clearInterval(this._timer),this._timer=null,setTimeout(function(){t.show=!1,t.$nextTick(function(){setTimeout(function(){t.percent=0},200)})},500),this},fail:function(){return this.canSuccess=!1,this}}},G={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"progress",style:{width:this.percent+"%",height:this.height,opacity:this.show?1:0,"background-color":this.canSuccess?this.color:this.failedColor}})},staticRenderFns:[]};var X=n("VU/8")(P,G,!1,function(t){n("S4fZ")},"data-v-36bcf547",null).exports,A=n("lfHO"),V=n("Z5yN"),B=V.keys().map(function(t){return[t.replace(/(^.\/)|(\.vue$)/g,""),V(t)]}).reduce(function(t,e){var n=p()(e,2),r=n[0],a=n[1];return t[r]=a,t},{}),N={el:"#app",components:{Loading:X,Layout:A.default},data:function(){return{layout:null,defaultLayout:"default"}},mounted:function(){this.$loading=this.$refs.loading},methods:{setLayout:function(t){t&&B[t]||(t=this.defaultLayout),this.layout=B[t]}}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("loading",{ref:"loading"}),this._v(" "),e("transition",{attrs:{name:"page",mode:"out-in"}},[e("layout")],1)],1)},staticRenderFns:[]},H=n("VU/8")(N,D,!1,null,null,null).exports,W=n("mtWM"),Z=n.n(W),q=n("e7x4"),K=n.n(q),J=this;Z.a.interceptors.request.use(function(t){var e=c.a.getters["auth/token"];return e&&(t.headers.common.Authorization="Bearer "+e),t}),Z.a.interceptors.response.use(function(t){return t},function(t){var e=t.response.status;return e>=500&&K()({type:"error",title:"error_alert_title",text:"error_alert_text",reverseButtons:!0,confirmButtonText:"ok",cancelButtonText:"cancel"}),401===e&&c.a.getters["auth/check"]&&K()({type:"warning",title:"token_expired_alert_title",text:"token_expired_alert_text",reverseButtons:!0,confirmButtonText:"ok",cancelButtonText:"cancel"}).then(k()(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.dispatch("auth/logout");case 2:U.push({name:"login"});case 3:case"end":return t.stop()}},t,J)}))),_.a.reject(t)});var Y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"page",mode:"out-in"}},[this._t("default",[e("router-view")])],2)},staticRenderFns:[]},z=n("VU/8")({name:"Child"},Y,!1,null,null,null).exports,Q=n("yKuP");[z,Q.HasError,Q.AlertError,Q.AlertSuccess].forEach(function(t){s.a.component(t.name,t)}),s.a.config.productionTip=!1,s.a.config.ignoredElements=[/^ion-/],new s.a(i()({store:c.a,router:U},H))},hF7s:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n("Xxa5"),o=n.n(a),u=n("exGp"),i=n.n(u),s=n("IcnI"),c=this;e.default=(r=i()(o.a.mark(function t(e,n,r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s.a.getters["auth/check"]?r():r({name:"login"});case 1:case"end":return t.stop()}},t,c)})),function(t,e,n){return r.apply(this,arguments)})},lfHO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),o=n("exGp"),u=n.n(o),i=n("NYxO"),s={data:function(){return{}},computed:Object(i.b)({user:"auth/user"}),mounted:function(){},created:function(){},methods:{logout:function(){var t=this;return u()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("auth/logout");case 2:t.$router.push({name:"login"});case 3:case"end":return e.stop()}},e,t)}))()}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("ion-menu",[n("ion-header",[n("ion-toolbar",{attrs:{color:"light"}},[n("ion-img",{staticStyle:{height:"30px",margin:"10px 0"},attrs:{src:"images/fortuna.png"}})],1)],1),t._v(" "),n("ion-content",[n("ion-list",[n("ion-list-header",[t._v("\n        Личный Кабинет\n      ")]),t._v(" "),n("ion-menu-toggle",{attrs:{"auto-hide":"false"}},[n("ion-item",{attrs:{button:""}},[n("ion-icon",{attrs:{name:"home"}}),t._v(" "),n("ion-label",[t._v("\n            Новости\n          ")])],1),t._v(" "),n("ion-item",{attrs:{button:""}},[n("ion-icon",{attrs:{name:"home"}}),t._v(" "),n("ion-label",[t._v("\n            Главная\n          ")])],1)],1)],1)],1)],1):t._e()},staticRenderFns:[]};var l=n("VU/8")(s,c,!1,function(t){n("ROEn")},null,null).exports,f={computed:Object(i.b)({title:"meta/title"})},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("ion-header",[e("ion-toolbar",[e("ion-buttons",{attrs:{slot:"start"},slot:"start"},[e("ion-menu-toggle",[e("ion-button",[e("ion-icon",{attrs:{slot:"icon-only",name:"menu"},slot:"icon-only"})],1)],1)],1),this._v(" "),e("ion-title",[this._v(this._s(this.title))])],1)],1)},staticRenderFns:[]};var p={name:"MainLayout",components:{SidebarMenu:l,AppHeader:n("VU/8")(f,h,!1,function(t){n("8NP1")},null,null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("ion-app",[e("sidebar-menu"),this._v(" "),e("transition",{attrs:{name:"transitionContent",mode:"out-in",appear:""}},[e("ion-page",{staticClass:"ion-page",attrs:{main:""}},[e("app-header"),this._v(" "),e("child")],1)],1),this._v(" "),e("ion-menu-controller")],1)},staticRenderFns:[]};var v=n("VU/8")(p,d,!1,function(t){n("qxn1")},null,null);e.default=v.exports},qxn1:function(t,e){},sRup:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"state",function(){return l}),n.d(e,"getters",function(){return f}),n.d(e,"mutations",function(){return h}),n.d(e,"actions",function(){return p});var r=n("Xxa5"),a=n.n(r),o=n("exGp"),u=n.n(o),i=n("bOdI"),s=n.n(i),c=n("Du/2"),l={title:"Информация"},f={title:function(t){return t.title}},h=s()({},c.e,function(t,e){t.title=e}),p={updateTitle:function(t,e){var n=this,r=t.commit;return u()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r(c.e,e);case 1:case"end":return t.stop()}},t,n)}))()}}},tL38:function(t,e){},yTZE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("IcnI");e.default=function(t,e,n){"admin"!==r.a.getters["auth/user"].role?n({name:"home"}):n()}},yXbG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content__inner content__inner--sm"},[e("child")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"BasicLayout"},r,!1,function(t){n("tL38")},null,null);e.default=a.exports}},["eslX"]);